<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
<!--   <meta http-equiv="Content-Security-Policy" content="default-src *; ">-->
<!--   <meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval'">-->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="theme-color" content="#2196f3">
    <title>Notifications</title>
    <link rel="stylesheet" href="css/framework7.material.css">
    <link rel="stylesheet" href="css/framework7.material.colors.css">
    <link href="css/googlefont.css" rel="stylesheet" type="text/css">
    
  </head>
  <body>
    <div class="login-screen modal-in">
    <div class="view">
      <div class="page">
        <div class="page-content login-screen-content">
          <div class="login-screen-title">Registro</div>
          <form id="formulario" name="formulario">
            <div class="list-block">
              <ul>
                <li class="item-content">
                  <div class="item-inner">
                    <div class="item-title label">Nombre</div>
                    <div class="item-input">
                      <input type="text" id="name" name="name" placeholder="Nombre" required>
                    </div>
                  </div>
                </li>
                <li class="item-content">
                  <div class="item-inner">
                    <div class="item-title label">E-mail</div>
                    <div class="item-input">
                      <input type="text" id="email" name="email" placeholder="Correo" required>
                    </div>
                  </div>
                </li>
                <li class="item-content">
                  <div class="item-inner">
                    <div class="item-title label">Id</div>
                    <div class="item-input">
                     <input value="1234567890" type="text" name="regId" id="regId" readonly="readonly" placeholder="regId">
                    </div>
                  </div>
                </li>
              </ul>
            </div>
            <div class="list-block">
              <ul>
                <li><div class="content-block"><a id="login-button"
 class="button button-big">Sign In</a></div></li>
              </ul>
              <div class="list-block-label">
                <p>Este espacio de puede ocupar, para algun mensaje.</p>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>    
<script type="text/javascript" src="cordova.js"></script>
    <script src="js/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="js/framework7.js"></script>
    <script  type="text/javascript" src="js/my-app.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.4.5.min.js"></script>
<script>
         //$(document).on("mobileinit", function() {
        //$.support.cors = true;
        //$.mobile.allowCrossDomainPages = true;
             
             
             $("#login-button").click(function(event){
		 event.preventDefault();
            var name = $("#name").val();
	        var email = $("#email").val();
            var regId = $("#regId").val();
           /* $.getJSON(
                'https://desde.260mb.net/usuario.php?callback=?',  
                {op:'reg', name:name, email:email, regId:regId},
                function(data) {
                    data=JSON.parse(data);
				if(data.estatus == true){
                    console.log(data.mensaje);
				    alert(data.mensaje);                    
                    window.location =("home.html");                    
				}
				else{
                    alert("Error : "+data.mensaje);
                    console.log(data.mensaje);
				}});*/
           $.ajax({
                url:'http://desde.260mb.net/usuario.php',
                type: 'get',
                //data: {op:'reg', name:name, email:email,regId:regId},
               data: "{op:'reg', name:'" + name + "', email:'" + email + "',regId:'"+regId+"'}",
                dataType : 'jsonp',
//                jsonp: false,
//                cache : false,
//                jsonpCallback: "callback", 
//                contentType: "application/json; charset=utf-8",
                timeout: 10000,
//                jsonp: 'callback',
                crossDomain: true,
			success: function(data) {
				if(data.estatus == true){
                    console.log(data.mensaje);
				    alert(data.mensaje);                    
                    window.location =("home.html");                    
				}
				else{
                    alert("Error : "+data.mensaje);
                    console.log(data.mensaje);
				}
			},
                error:function (xhr, ajaxOptions, thrownError){
            console.log(xhr);
                    alert(xhr);
            console.log(ajaxOptions);
                    alert(ajaxOptions);
            console.log(thrownError);
                    alert(thrownError);
        }
			/*error: function(e) {
                console.log(JSON.stringify(e));
				alert("ERROR TECNICO CON EL SERVICIO, INTENTE DE NUEVO MAS TARDE " +JSON.stringify(e));
	//		}
		});*/
    });  

        });
                
        /*if(reg==1)
    {
       
         window.location =("home.html");
    }
   

        
        function registrar(){
            var nombre = document.getElementById('name').value;
            var email = document.getElementById('email').value;
            var regId = document.getElementById('regId').value;
            if (regId != "") {
                if (nombre != '' && email != '') {
                    //Enviamos los datos al servidor php
                    document.formulario.submit();
                    var reg=1;
                }
                else{alert('Ingrese un nombre y un correo para el registro en la base de datos.')}
            }
            else
                {alert('Esperando regId del registro en GCM!');}
        }*/
      
      
//    });
        
    
      </script>
  </body>
</html>